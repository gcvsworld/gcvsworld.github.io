{"title":"为什么以及如何要避免浏览器的重绘和重排","uid":"95e13f2b371133fc0a33e9d5deb05282","slug":"http/为什么以及如何要避免浏览器的重绘和重排","date":"2022-11-14T12:40:50.645Z","updated":"2022-11-14T12:40:50.645Z","comments":true,"path":"api/articles/http/为什么以及如何要避免浏览器的重绘和重排.json","keywords":null,"cover":[],"content":"<p><em>天气：🌤</em></p>\n<h2 id=\"why\"><a href=\"#why\" class=\"headerlink\" title=\"why?\"></a>why?</h2><p><img src=\"https://thumbnail0.baidupcs.com/thumbnail/f9f9ea445j2b610a5e4c259fdd6a5a1a?fid=3031270481-250528-879925807575283&time=1668427200&rt=sh&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-cVBdQUjVVfxljxXT7HnrHjqMp90=&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=454455358293489033&dp-callid=0&file_type=0&size=c710_u400&quality=100&vuk=-&ft=video\" alt=\"image\"></p>\n<p><em>重排和重绘都会占用主线程，JavaScript也是运行在主线程上的，会出现抢占时间的问题，如果有一个不断重排重绘的动画，那么浏览器需要在每一帧都运行样式，来进行布局和绘制的操作，当浏览器以60帧每秒的刷新运行时才不会让使用者感觉到卡顿，如果运行动画的同时还有大量js任务，当在一帧的时间内布局和绘制结束后还有剩余时间，JS就会拿到主线程的使用权，如果JS执行时间过长就会导致在下一帧开始时JS没有及时归还主线程，导致下一帧动画没有按时渲染，就会出现页面动画的卡顿</em></p>\n<hr>\n<h2 id=\"如何避免\"><a href=\"#如何避免\" class=\"headerlink\" title=\"如何避免\"></a>如何避免</h2><p><img src=\"https://thumbnail0.baidupcs.com/thumbnail/5d8f597e5heaf19e29975895dc62f208?fid=3031270481-250528-18573261279814&time=1668427200&rt=sh&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-812QjpAHvjQIoeCIj5ycv6sSJbU=&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=454460565545273102&dp-callid=0&file_type=0&size=c710_u400&quality=100&vuk=-&ft=video\" alt=\"image\"></p>\n<p><em>通过这个api，这个方法会在每一帧被调用，通过api的回调，把JS运行任务分到每一帧，在每一帧时间用完前暂停JS执行归还主线程，这样在下一帧开始时主线程就可以按时执行布局和绘制</em></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>如：React Fiber</p></blockquote>\n<p><img src=\"https://thumbnail0.baidupcs.com/thumbnail/5d8955378tb1c3574a6b8d1ccb3d1096?fid=3031270481-250528-189013219464618&time=1668427200&rt=sh&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-onwdOSP2yUrtcS5u9QAv/55E6bU=&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=454463483851697817&dp-callid=0&file_type=0&size=c710_u400&quality=100&vuk=-&ft=video\" alt=\"image\"></p>\n<p><em>格化并不占用主线程  css有个动画属性叫做transfrom,通过该属性实现的动画不会经过布局和绘制，而是直接运行在合成器线程和栅格线程中，不会受到主线程中JS执行的影响</em></p>\n","feature":true,"text":"天气：🌤 why? 重排和重绘都会占用主线程，JavaScript也是运行在主线程上的，会出现抢占时间的问题，如果有一个不断重排重绘的动画，那么浏览器需要在每一帧都运行样式，来进行布局和绘制的操作，当浏览器以60帧每秒的刷新运行时才不会让使用者感觉到卡顿，如果运行动画的同时还有大...","link":"","photos":[],"count_time":{"symbolsCount":449,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"http","slug":"http","count":2,"path":"api/tags/http.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#why\"><span class=\"toc-text\">why?</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D\"><span class=\"toc-text\">如何避免</span></a></li></ol>","author":{"name":"gcvsworld","slug":"blog-author","avatar":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.duoziwang.com%2F2018%2F21%2F08290851310819.jpg&refer=http%3A%2F%2Fimg.duoziwang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1670741853&t=768f7a87c4f6627b97d2c21147c21e6f","link":"/","description":"一个正在努力学习前端知识的年轻人<br /> 我的github：<b>https://github.com/gcvsworld</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"互联网数据获取与传输","uid":"e9ba00a6d736e7f3421bdb479f812a2c","slug":"http/互联网数据获取与传输","date":"2022-11-14T12:40:50.645Z","updated":"2022-11-14T12:40:50.645Z","comments":true,"path":"api/articles/http/互联网数据获取与传输.json","keywords":null,"cover":[],"text":"天气：🌨️ 数据获取 ISP 如电信、联通、移动NSP 网络服务提供商NSP 通过网络访问点NAP来交换数据包流量 每个NAP至少连接三个网络访问点数据包到达路由器，路由器检查路由表上是否有目的地的IP地址，如果有直接发送给那个网络，如果没有就向上层去寻找拥有该IP的路由器直到到达...","link":"","photos":[],"count_time":{"symbolsCount":317,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"http","slug":"http","count":2,"path":"api/tags/http.json"}],"author":{"name":"gcvsworld","slug":"blog-author","avatar":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.duoziwang.com%2F2018%2F21%2F08290851310819.jpg&refer=http%3A%2F%2Fimg.duoziwang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1670741853&t=768f7a87c4f6627b97d2c21147c21e6f","link":"/","description":"一个正在努力学习前端知识的年轻人<br /> 我的github：<b>https://github.com/gcvsworld</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"Hello World","uid":"b9663f58f18133b35bfe243f3e916a80","slug":"hello-world","date":"2022-11-14T12:40:50.645Z","updated":"2022-11-14T12:40:50.645Z","comments":true,"path":"api/articles/hello-world.json","keywords":null,"cover":null,"text":"edit from githubhello welcome to my blog 今天是2022年11月10号我开始写我博客的第一篇文章 以后我会在这个博客里记录我的学习历程 O(∩_∩)O ","link":"","photos":[],"count_time":{"symbolsCount":96,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"开始的地方","slug":"开始的地方","count":1,"path":"api/tags/开始的地方.json"}],"author":{"name":"gcvsworld","slug":"blog-author","avatar":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.duoziwang.com%2F2018%2F21%2F08290851310819.jpg&refer=http%3A%2F%2Fimg.duoziwang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1670741853&t=768f7a87c4f6627b97d2c21147c21e6f","link":"/","description":"一个正在努力学习前端知识的年轻人<br /> 我的github：<b>https://github.com/gcvsworld</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}